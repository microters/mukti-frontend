import { dir } from 'i18next'; // For direction (ltr/rtl)
import i18nConfig from "../../../i18nConfig";
import { AuthProvider } from "../utils/AuthContext";
// import Header from "../Component/Header"; // Assuming Header is imported from the correct location
import initTranslations from '@/i18n'; // Assuming initTranslations handles fetching translations

export const metadata = {
  title: "Mukti Hospital",
  description: "Generated by create next app",
};

// ✅ `generateStaticParams()` to ensure static routes for locales
export async function generateStaticParams() {
  return i18nConfig.locales.map((locale) => ({ locale }));
}

// ✅ RootLayout component (Server Component)
export default async function RootLayout({ children, params }) {
  // Await params to properly access locale
  const { locale } = await params; // Make sure to await before accessing properties
  const direction = dir(locale) || 'ltr'; // Set text direction (ltr/rtl)

  // Fetch translations for the current locale
  const { t, resources } = await initTranslations(locale, ['home']); // Fetch translations

  return (
    <html lang={locale} dir={dir(locale)}>
      <body suppressHydrationWarning>
        <AuthProvider>
          {/* Pass translations and locale to Header and children */}
          {/* <Header locale={locale} translations={{ t, resources }} /> */}
          {children}
        </AuthProvider>
      </body>
    </html>
  );
}
